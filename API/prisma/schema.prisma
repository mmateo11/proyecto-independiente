generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql" //tipo de proveedor de bd
  url      = env("DATABASE_URL")
}

// Enums: lista cerrada de opciones
enum metodo_pago_enum {
  EFECTIVO
  TARJETA
  TRANSFERENCIA
}

enum tipo_noticia {
  PRINCIPAL
  SECUNDARIO
}

// Tablas
model jugadores {
  id               Int     @id @default(autoincrement()) // id del jugador
  nombre           String  @db.VarChar(191)
  posicion         String  @db.VarChar(191)
  dorsal           Int
  url_imagen       String  @db.VarChar(191)
  edad             Int
  lugar_nacimiento String @db.VarChar(191)
  nacionalidad     String @db.VarChar(191)
  peso             Float
}

model noticias {
  id          Int          @id @default(autoincrement())
  titulo      String       @db.VarChar(191)
  tipo        tipo_noticia // enum tipo de noticia
  descripcion String
  fecha       DateTime     @default(now()) @db.Timestamp(6)
  url_imagen  String       @db.VarChar(191)
  resumen     String      @db.VarChar(191)
}

model partidos {
  id        Int        @id @default(autoincrement())
  fecha     DateTime   @db.Timestamp(6)
  rival     String     @db.VarChar(191)
  resultado String    @db.VarChar(191)
  entradas  entradas[] // relación con entradas
}

model entradas {
  id          Int              @id @default(autoincrement()) 
  id_partido  Int           
  id_socio    Int             
  valor       Float           
  metodo_pago metodo_pago_enum 

  partido     partidos @relation(fields: [id_partido], references: [id])
  socio       socios   @relation(fields: [id_socio], references: [id])   
}

model socios {
  id          Int        @id @default(autoincrement())
  fecha_nac   DateTime   @db.Timestamp(6)
  email       String     @unique @db.VarChar(191)
  password    String     @db.VarChar(191)
  metodo_pago String     @db.VarChar(191)
  activo      Boolean    @default(true)
  creado_en   DateTime   @default(now()) @db.Timestamp(6)
  nombre      String     @db.VarChar(191)
  entradas    entradas[] // relación con entradas
}
